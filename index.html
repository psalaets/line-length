<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/awsm.css/dist/awsm_theme_white.min.css" media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)">
  <link rel="stylesheet" href="https://unpkg.com/awsm.css/dist/awsm_theme_black.min.css" media="(prefers-color-scheme: dark)">
  <title>line-length</title>
</head>
<body>
  <main>
    <h1>line-length</h1>
<p>This bookmarklet measures lengths of text on a page.</p>
<h2>Install</h2>
<p>Drag this link to the bookmarks toolbar: <a href="javascript:(function(){function*e(t){for(const n of t.childNodes)n.nodeType===Node.TEXT_NODE?yield n:n instanceof HTMLElement&amp;&amp;(yield*e(n))}function t(t,n={}){const o=n.split??(e=&gt;e.split(/&#92;b/)),i=n.wrap??(e=&gt;{const t=document.createElement(&quot;span&quot;);return t.textContent=e,t}),r=[];return Array.from(e(t)).forEach((e=&gt;{const t=Array.from(o(e.data),(t=&gt;{const n=i(t,e);return n instanceof HTMLElement&amp;&amp;r.push(n),n}));e.replaceWith(...t)})),{wrappers:r,revert(){r.forEach((e=&gt;e.replaceWith(e.textContent??&quot;&quot;))),t.normalize()}}}function n(e){const t=e.slice().sort(((e,t)=&gt;e-t)),n=Math.floor(t.length/2);return t.length%2!=0?t[n]:(t[n-1]+t[n])/2}(function(e){const t=n=&gt;{&quot;Escape&quot;===n.key&amp;&amp;(document.removeEventListener(&quot;keydown&quot;,t),e())};document.addEventListener(&quot;keydown&quot;,t)})(function(){const e=function(){const e=document.createElement(&quot;style&quot;);return e.textContent=&quot;[data-line-length-subject] { outline: 3px dotted #E7040F !important; }&quot;,document.body.appendChild(e),()=&gt;e.remove()}();let o=null;const i=[&quot;body&quot;,&quot;html&quot;],r=e=&gt;{const r=e.target;if(i.some((e=&gt;r.matches(e))))return;r.dataset.lineLengthSubject=&quot;&quot;;const s=(a=function(e){const{wrappers:n,revert:o}=t(e),i=[],r={maxHeight:0,highestTop:-1/0};for(const e of n){const{top:t,height:n}=e.getBoundingClientRect();t&gt;=r.highestTop+.5*r.maxHeight?(i.push([e]),r.highestTop=t,r.maxHeight=n):(i.at(-1).push(e),r.highestTop=Math.min(r.highestTop,t),r.maxHeight=Math.max(r.maxHeight,n))}const s=i.map((e=&gt;e.map((e=&gt;e.innerText||&quot;&quot;)).join(&quot;&quot;).trim().length)).filter((e=&gt;e));return o(),s}(r)).length&gt;0?{max:Math.max(...a),median:n(a)}:null;var a;s&amp;&amp;(o=o||function(){const e=document.createElement(&quot;div&quot;);return e.style.cssText=&quot;&#92;ncolor: #111;&#92;nbackground-color: #fff;&#92;nborder: 2px solid #111;&#92;nborder-radius: 0.5rem;&#92;nbox-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;&#92;nmargin: 0;&#92;npadding: 0.8rem;&#92;nposition: fixed;&#92;nz-index: 10;&#92;nmax-width: 20rem;&#92;nfont-family: Consolas, monaco, monospace;&#92;nfont-size: 1rem;&#92;nline-height: 1.5;&#92;ntext-align: start;&#92;n&quot;,document.body.appendChild(e),{moveTo(t,n){e.style.left=`${t}px`;const o=10;e.style.top=`${n+o}px`},update(t,n){const o=[&quot;&lt;span&gt;&quot;,`&lt;span style=&quot;color: #5E2CA5;&quot;&gt;${t.nodeName.toLowerCase()}&lt;/span&gt;`,t.id?`&lt;span style=&quot;color: #137752&quot;&gt;#${t.id}&lt;/span&gt;`:&quot;&quot;,t.classList.length?`&lt;span style=&quot;color: #E7040F;&quot;&gt;.${Array.from(t.classList).join(&quot;.&quot;)}&lt;/span&gt;`:&quot;&quot;,&quot;&lt;/span&gt;&quot;].join(&quot;&quot;);e.innerHTML=`&#92;n&lt;div style=&quot;overflow-x: clip;white-space: nowrap;text-overflow: ellipsis;padding: 0 0 0.8rem 0; margin: 0 0 0.8rem 0; border-bottom: 1px solid #d3d3d3;&quot;&gt;${o}&lt;/div&gt;&#92;n&lt;div style=&quot;margin: inherit; line-height: inherit;&quot;&gt;Median: ${n.median}&lt;/div&gt;&#92;n&lt;div style=&quot;margin: inherit; line-height: inherit;&quot;&gt;Max: ${n.max}&lt;/div&gt;&#92;n&lt;div style=&quot;color: dimgray; font-size: 0.8rem; margin: 0.8rem 0 0 0; text-align: center;&quot;&gt;Esc to close&lt;/div&gt;`},destroy(){e.remove()}}}(),o.update(r,s),o.moveTo(e.clientX,e.clientY))},s=e=&gt;{delete e.target.dataset.lineLengthSubject},a=e=&gt;{o&amp;&amp;o.moveTo(e.clientX,e.clientY)};return document.addEventListener(&quot;mouseover&quot;,r),document.addEventListener(&quot;mousemove&quot;,a),document.addEventListener(&quot;mouseout&quot;,s),()=&gt;{document.removeEventListener(&quot;mouseover&quot;,r),document.removeEventListener(&quot;mousemove&quot;,a),document.removeEventListener(&quot;mouseout&quot;,s),o&amp;&amp;(o.destroy(),e())}}())})();
">line-length</a></p>
<h2>Usage</h2>
<p>After installing the bookmarklet,</p>
<ol>
<li>Click line-length in the bookmarks toolbar</li>
<li>Mouse over any elements that contain text</li>
<li>Press Esc when done.</li>
</ol>
<h2>Demo</h2>
<p><a href="javascript:(function(){function*e(t){for(const n of t.childNodes)n.nodeType===Node.TEXT_NODE?yield n:n instanceof HTMLElement&amp;&amp;(yield*e(n))}function t(t,n={}){const o=n.split??(e=&gt;e.split(/&#92;b/)),i=n.wrap??(e=&gt;{const t=document.createElement(&quot;span&quot;);return t.textContent=e,t}),r=[];return Array.from(e(t)).forEach((e=&gt;{const t=Array.from(o(e.data),(t=&gt;{const n=i(t,e);return n instanceof HTMLElement&amp;&amp;r.push(n),n}));e.replaceWith(...t)})),{wrappers:r,revert(){r.forEach((e=&gt;e.replaceWith(e.textContent??&quot;&quot;))),t.normalize()}}}function n(e){const t=e.slice().sort(((e,t)=&gt;e-t)),n=Math.floor(t.length/2);return t.length%2!=0?t[n]:(t[n-1]+t[n])/2}(function(e){const t=n=&gt;{&quot;Escape&quot;===n.key&amp;&amp;(document.removeEventListener(&quot;keydown&quot;,t),e())};document.addEventListener(&quot;keydown&quot;,t)})(function(){const e=function(){const e=document.createElement(&quot;style&quot;);return e.textContent=&quot;[data-line-length-subject] { outline: 3px dotted #E7040F !important; }&quot;,document.body.appendChild(e),()=&gt;e.remove()}();let o=null;const i=[&quot;body&quot;,&quot;html&quot;],r=e=&gt;{const r=e.target;if(i.some((e=&gt;r.matches(e))))return;r.dataset.lineLengthSubject=&quot;&quot;;const s=(a=function(e){const{wrappers:n,revert:o}=t(e),i=[],r={maxHeight:0,highestTop:-1/0};for(const e of n){const{top:t,height:n}=e.getBoundingClientRect();t&gt;=r.highestTop+.5*r.maxHeight?(i.push([e]),r.highestTop=t,r.maxHeight=n):(i.at(-1).push(e),r.highestTop=Math.min(r.highestTop,t),r.maxHeight=Math.max(r.maxHeight,n))}const s=i.map((e=&gt;e.map((e=&gt;e.innerText||&quot;&quot;)).join(&quot;&quot;).trim().length)).filter((e=&gt;e));return o(),s}(r)).length&gt;0?{max:Math.max(...a),median:n(a)}:null;var a;s&amp;&amp;(o=o||function(){const e=document.createElement(&quot;div&quot;);return e.style.cssText=&quot;&#92;ncolor: #111;&#92;nbackground-color: #fff;&#92;nborder: 2px solid #111;&#92;nborder-radius: 0.5rem;&#92;nbox-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;&#92;nmargin: 0;&#92;npadding: 0.8rem;&#92;nposition: fixed;&#92;nz-index: 10;&#92;nmax-width: 20rem;&#92;nfont-family: Consolas, monaco, monospace;&#92;nfont-size: 1rem;&#92;nline-height: 1.5;&#92;ntext-align: start;&#92;n&quot;,document.body.appendChild(e),{moveTo(t,n){e.style.left=`${t}px`;const o=10;e.style.top=`${n+o}px`},update(t,n){const o=[&quot;&lt;span&gt;&quot;,`&lt;span style=&quot;color: #5E2CA5;&quot;&gt;${t.nodeName.toLowerCase()}&lt;/span&gt;`,t.id?`&lt;span style=&quot;color: #137752&quot;&gt;#${t.id}&lt;/span&gt;`:&quot;&quot;,t.classList.length?`&lt;span style=&quot;color: #E7040F;&quot;&gt;.${Array.from(t.classList).join(&quot;.&quot;)}&lt;/span&gt;`:&quot;&quot;,&quot;&lt;/span&gt;&quot;].join(&quot;&quot;);e.innerHTML=`&#92;n&lt;div style=&quot;overflow-x: clip;white-space: nowrap;text-overflow: ellipsis;padding: 0 0 0.8rem 0; margin: 0 0 0.8rem 0; border-bottom: 1px solid #d3d3d3;&quot;&gt;${o}&lt;/div&gt;&#92;n&lt;div style=&quot;margin: inherit; line-height: inherit;&quot;&gt;Median: ${n.median}&lt;/div&gt;&#92;n&lt;div style=&quot;margin: inherit; line-height: inherit;&quot;&gt;Max: ${n.max}&lt;/div&gt;&#92;n&lt;div style=&quot;color: dimgray; font-size: 0.8rem; margin: 0.8rem 0 0 0; text-align: center;&quot;&gt;Esc to close&lt;/div&gt;`},destroy(){e.remove()}}}(),o.update(r,s),o.moveTo(e.clientX,e.clientY))},s=e=&gt;{delete e.target.dataset.lineLengthSubject},a=e=&gt;{o&amp;&amp;o.moveTo(e.clientX,e.clientY)};return document.addEventListener(&quot;mouseover&quot;,r),document.addEventListener(&quot;mousemove&quot;,a),document.addEventListener(&quot;mouseout&quot;,s),()=&gt;{document.removeEventListener(&quot;mouseover&quot;,r),document.removeEventListener(&quot;mousemove&quot;,a),document.removeEventListener(&quot;mouseout&quot;,s),o&amp;&amp;(o.destroy(),e())}}())})();
">Activate the bookmarklet</a> then mouse over these paragraphs.</p>
<p style="width: 30rem;" id="demo-1" class="measure-narrow">
  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Velit sed ullamcorper morbi tincidunt ornare. Turpis cursus in hac habitasse platea dictumst quisque sagittis purus. Curabitur gravida arcu ac tortor. A pellentesque sit amet porttitor eget dolor. Adipiscing vitae proin sagittis nisl rhoncus mattis rhoncus urna neque.
</p>
<p style="width: 40rem;" id="demo-2" class="measure">
  Ac turpis egestas maecenas pharetra convallis. Fringilla urna porttitor rhoncus dolor purus non enim praesent. Eu nisl nunc mi ipsum faucibus. Neque ornare aenean euismod elementum nisi. Dui sapien eget mi proin sed libero enim. Ultrices eros in cursus turpis massa tincidunt. Vitae auctor eu augue ut. Vulputate eu scelerisque felis imperdiet proin fermentum leo vel. Est sit amet facilisis magna etiam.
</p>
<p style="width: 50rem;" id="demo-3" class="measure-wide">
  Mus mauris vitae ultricies leo integer malesuada nunc. Eget egestas purus viverra accumsan in. Gravida in fermentum et sollicitudin ac orci phasellus. Sed euismod nisi porta lorem mollis. Augue mauris augue neque gravida in. Eget egestas purus viverra accumsan in. Integer vitae justo eget magna fermentum iaculis. Tincidunt lobortis feugiat vivamus at augue. Tortor posuere ac ut consequat semper viverra. Porttitor eget dolor morbi non arcu risus quis varius quam. Aliquam nulla facilisi cras fermentum. Ac placerat vestibulum lectus mauris ultrices. Sed turpis tincidunt id aliquet risus feugiat. Gravida rutrum quisque non tellus orci ac auctor augue mauris. Suspendisse potenti nullam ac tortor vitae purus. Turpis nunc eget lorem dolor sed viverra ipsum nunc.
</p>

  </main>
</body>
</html>
